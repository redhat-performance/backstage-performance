# Results
{%macro results_scenario(name) -%}
- name: results.{{name | replace('.', '_')}}.locust_requests_avg_response_time
  monitoring_query: max(locust_requests_avg_response_time{name=~"{{name}}", namespace="${LOCUST_NAMESPACE}", job="${SCENARIO}-test-master"})
  monitoring_step: 15
- name: results.{{name | replace('.', '_')}}.locust_requests_avg_content_length
  monitoring_query: max(locust_requests_avg_content_length{name=~"{{name}}", namespace="${LOCUST_NAMESPACE}", job="${SCENARIO}-test-master"})
  monitoring_step: 15
- name: results.{{name | replace('.', '_')}}.locust_requests_current_rps
  monitoring_query: max(locust_requests_current_rps{name=~"{{name}}", namespace="${LOCUST_NAMESPACE}", job="${SCENARIO}-test-master"})
  monitoring_step: 15
- name: results.{{name | replace('.', '_')}}.locust_requests_current_fail_per_sec
  monitoring_query: max(locust_requests_current_fail_per_sec{name=~"{{name}}", namespace="${LOCUST_NAMESPACE}", job="${SCENARIO}-test-master"})
  monitoring_step: 15
- name: results.{{name | replace('.', '_')}}.locust_requests_num_failures
  monitoring_query: sum(locust_requests_num_failures{name=~"{{name}}", namespace="${LOCUST_NAMESPACE}", job="${SCENARIO}-test-master"})
  monitoring_step: 15
- name: results.{{name | replace('.', '_')}}.locust_errors
  monitoring_query: sum(locust_errors{name=~"{{name}}", namespace="${LOCUST_NAMESPACE}", job="${SCENARIO}-test-master"})
  monitoring_step: 15
{%- endmacro %}

{{ results_scenario('/api/auth/oauth2Proxy/refresh') }}
{{ results_scenario('/auth/realms/backstage/login-actions/authenticate\\\\?session_code=.*&.*&client_id=backstage&.*&execution=.*')}}
{{ results_scenario('/api/orchestrator/v2/workflows/overview') }}
{{ results_scenario('/api/permission/authorize') }}
{{ results_scenario('/api/orchestrator/v2/workflows/.*/execute') }}
{{ results_scenario('/api/orchestrator/v2/workflows/instances/.*') }}
{{ results_scenario('/api/orchestrator/v2/workflows/instances') }}
